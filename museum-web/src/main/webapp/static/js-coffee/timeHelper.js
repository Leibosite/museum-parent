// Generated by CoffeeScript 1.6.3
(function() {
  $.fn.extend({
    timeHelper: function(options) {
      var cronSelectBlock, dateSelectBlock, fmt, settings, weekSelectBlock;
      settings = {
        model: 'day',
        method: 'bind',
        path: ''
      };
      settings = $.extend(settings, options);
      fmt = {
        dayDateForm: {
          language: 'zh-CN',
          startView: 0,
          format: 'hh:ii',
          minuteStep: 10,
          maxView: 1
        },
        monthDateFmt: {
          language: 'zh-CN',
          startView: 2,
          format: 'mm月dd日',
          maxView: 2,
          minView: 2
        },
        yearDateFmt: {
          language: 'zh-CN',
          startView: 3,
          format: 'mm月',
          maxView: 3,
          minView: 3
        }
      };
      weekSelectBlock = "<select>\n	<option value=\"1\">星期一</option>\n	<option value=\"2\">星期二</option>\n	<option value=\"3\">星期三</option>\n	<option value=\"4\">星期四</option>\n	<option value=\"5\">星期五</option>\n	<option value=\"6\">星期六</option>\n	<option value=\"7\">星期日</option>\n</select>";
      dateSelectBlock = "<input type=\"text\" />";
      cronSelectBlock = "<div><div style=\"display:inline-block\"></div><input type=\"text\" value=\"\"/></div>";
      return this.each(function() {
        var container, cronSelect, dateSelect, target, weekSelect;
        if (settings.model === 'cron') {
          cronSelect = $(cronSelectBlock);
          cronSelect.attr('class', $(this).attr('class'));
          container = cronSelect.find('div');
          target = cronSelect.find('input');
          $(this).replaceWith(cronSelect);
          return container.cron({
            useGentleSelect: true,
            onChange: function() {
              return target.val(container.cron('value'));
            }
          });
        } else if (settings.model === 'week') {
          weekSelect = $(weekSelectBlock);
          weekSelect.attr('class', $(this).attr('class'));
          return $(this).replaceWith(weekSelect);
        } else {
          dateSelect = $(dateSelectBlock);
          dateSelect.attr('class', $(this).attr('class'));
          $(dateSelect).datetimepicker(fmt[settings.model + 'DateFmt']);
          return $(this).replaceWith(dateSelect);
        }
      });
    }
  });

}).call(this);
